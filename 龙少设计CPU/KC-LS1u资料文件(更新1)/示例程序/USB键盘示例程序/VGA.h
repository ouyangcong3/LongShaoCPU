
/*----Ê¹ÓÃ´Ëº¯ÊýÒª°ÑÏÂÃæµÄ±äÁ¿¶¨Òå¿½±´µ½"qjbldy.h"-----

unsigned char VGA_CT2_; //¼ÇÂ¼Ó²¼þ¼ÆÊýÆ÷¸ß16Î»µÄµÍ8Î»Êý¾Ý,ÓÃÓÚºÍ×îÐÂµÄ¼ÆÊýÆ÷Êý¾Ý±È½Ï

unsigned char GB2312[196608]; //GB2312×Ö¿â,×Ö·û´óÐ¡12*12,Õ¼384¸öÉÈÇø

unsigned char ASCII[] =  //ASCII×Ö¿â,×Ö·û´óÐ¡12*6
 
{

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*" ",0

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"",1

0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x10,0x10,0x10,0x10,0x10,///*"",2

0x10,0x10,0x10,0x10,0x10,0x10,0x1C,0x00,0x00,0x00,0x00,0x00,///*"",3

0x10,0x10,0x10,0x10,0x10,0x10,0xF0,0x00,0x00,0x00,0x00,0x00,///*"",4

0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,///*"",5

0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0x00,0x00,///*"",6

0x00,0x00,0x00,0x30,0x78,0x78,0x78,0x30,0x00,0x00,0x00,0x00,///*"",7

0xFC,0xFC,0xFC,0xCC,0x84,0x84,0x84,0xCC,0xFC,0xFC,0xFC,0xFC,///*"",8

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"	",9

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*" ",10

0x00,0x1C,0x0C,0x0C,0x14,0x10,0x30,0x48,0x48,0x30,0x00,0x00,///*"",11

0x00,0x38,0x44,0x44,0x38,0x10,0x7C,0x10,0x10,0x10,0x00,0x00,///*"",12

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*" ",13

0x00,0x0C,0x34,0x2C,0x34,0x24,0x24,0x2C,0x6C,0x60,0x00,0x00,///*"",14

0x00,0x54,0x54,0x28,0x28,0x6C,0x28,0x28,0x54,0x54,0x00,0x00,///*"",15

0x10,0x10,0x10,0x10,0x10,0x10,0xFC,0x10,0x10,0x10,0x10,0x10,///*"",16

0x00,0x04,0x0C,0x1C,0x3C,0x7C,0x3C,0x1C,0x0C,0x04,0x00,0x00,///*"",17

0x00,0x10,0x38,0x10,0x10,0x10,0x10,0x10,0x38,0x10,0x00,0x00,///*"",18

0x00,0x28,0x28,0x28,0x28,0x28,0x28,0x00,0x28,0x28,0x00,0x00,///*"",19

0x00,0x3C,0x54,0x54,0x54,0x34,0x14,0x14,0x14,0x14,0x3C,0x00,///*"",20

0x10,0x10,0x10,0x10,0x10,0x10,0xFC,0x00,0x00,0x00,0x00,0x00,///*"",21

0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x10,0x10,0x10,0x10,0x10,///*"",22

0x10,0x10,0x10,0x10,0x10,0x10,0xF0,0x10,0x10,0x10,0x10,0x10,///*"",23

0x00,0x10,0x38,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,///*"",24

0x10,0x10,0x10,0x10,0x10,0x10,0x1C,0x10,0x10,0x10,0x10,0x10,///*"",25

0x00,0x00,0x00,0x00,0x08,0x7C,0x08,0x00,0x00,0x00,0x00,0x00,///*"",26

0x00,0x00,0x00,0x00,0x20,0x7C,0x20,0x00,0x00,0x00,0x00,0x00,///*"",27

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"",28

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"",29

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"",30

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"",31

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*" ",32

0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x00,0x20,0x00,0x00,///*"!",33

0x00,0x28,0x50,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*""",34

0x00,0x00,0x28,0x28,0xFC,0x28,0x50,0xFC,0x50,0x50,0x00,0x00,///*"#",35

0x00,0x20,0x78,0xA8,0xA0,0x60,0x30,0x28,0xA8,0xF0,0x20,0x00,///*"$",36

0x00,0x00,0x48,0xA8,0xB0,0x50,0x28,0x34,0x54,0x48,0x00,0x00,///*"%",37

0x00,0x00,0x20,0x50,0x50,0x78,0xA8,0xA8,0x90,0x6C,0x00,0x00,///*"&",38

0x00,0x40,0x40,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"'",39

0x00,0x04,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x08,0x04,0x00,///*"(",40

0x00,0x40,0x20,0x10,0x10,0x10,0x10,0x10,0x10,0x20,0x40,0x00,///*")",41

0x00,0x00,0x00,0x20,0xA8,0x70,0x70,0xA8,0x20,0x00,0x00,0x00,///*"*",42

0x00,0x00,0x20,0x20,0x20,0xF8,0x20,0x20,0x20,0x00,0x00,0x00,///*"+",43

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x80,///*",",44

0x00,0x00,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,///*"-",45

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,///*".",46

0x00,0x08,0x10,0x10,0x10,0x20,0x20,0x40,0x40,0x40,0x80,0x00,///*"/",47

0x00,0x00,0x70,0x88,0x88,0x88,0x88,0x88,0x88,0x70,0x00,0x00,///*"0",48

0x00,0x00,0x20,0x60,0x20,0x20,0x20,0x20,0x20,0x70,0x00,0x00,///*"1",49

0x00,0x00,0x70,0x88,0x88,0x10,0x20,0x40,0x80,0xF8,0x00,0x00,///*"2",50

0x00,0x00,0x70,0x88,0x08,0x30,0x08,0x08,0x88,0x70,0x00,0x00,///*"3",51

0x00,0x00,0x10,0x30,0x50,0x50,0x90,0x78,0x10,0x18,0x00,0x00,///*"4",52

0x00,0x00,0xF8,0x80,0x80,0xF0,0x08,0x08,0x88,0x70,0x00,0x00,///*"5",53

0x00,0x00,0x70,0x90,0x80,0xF0,0x88,0x88,0x88,0x70,0x00,0x00,///*"6",54

0x00,0x00,0xF8,0x90,0x10,0x20,0x20,0x20,0x20,0x20,0x00,0x00,///*"7",55

0x00,0x00,0x70,0x88,0x88,0x70,0x88,0x88,0x88,0x70,0x00,0x00,///*"8",56

0x00,0x00,0x70,0x88,0x88,0x88,0x78,0x08,0x48,0x70,0x00,0x00,///*"9",57

0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x20,0x00,0x00,///*":",58

0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x20,0x20,0x00,///*";",59

0x00,0x04,0x08,0x10,0x20,0x40,0x20,0x10,0x08,0x04,0x00,0x00,///*"<",60

0x00,0x00,0x00,0x00,0xF8,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,///*"=",61

0x00,0x40,0x20,0x10,0x08,0x04,0x08,0x10,0x20,0x40,0x00,0x00,///*">",62

0x00,0x00,0x70,0x88,0x88,0x10,0x20,0x20,0x00,0x20,0x00,0x00,///*"?",63

0x00,0x00,0x70,0x88,0x98,0xA8,0xA8,0xB8,0x80,0x78,0x00,0x00,///*"@",64

0x00,0x00,0x20,0x20,0x30,0x50,0x50,0x78,0x48,0xCC,0x00,0x00,///*"A",65

0x00,0x00,0xF0,0x48,0x48,0x70,0x48,0x48,0x48,0xF0,0x00,0x00,///*"B",66

0x00,0x00,0x78,0x88,0x80,0x80,0x80,0x80,0x88,0x70,0x00,0x00,///*"C",67

0x00,0x00,0xF0,0x48,0x48,0x48,0x48,0x48,0x48,0xF0,0x00,0x00,///*"D",68

0x00,0x00,0xF8,0x48,0x50,0x70,0x50,0x40,0x48,0xF8,0x00,0x00,///*"E",69

0x00,0x00,0xF8,0x48,0x50,0x70,0x50,0x40,0x40,0xE0,0x00,0x00,///*"F",70

0x00,0x00,0x38,0x48,0x80,0x80,0x9C,0x88,0x48,0x30,0x00,0x00,///*"G",71

0x00,0x00,0xCC,0x48,0x48,0x78,0x48,0x48,0x48,0xCC,0x00,0x00,///*"H",72

0x00,0x00,0xF8,0x20,0x20,0x20,0x20,0x20,0x20,0xF8,0x00,0x00,///*"I",73

0x00,0x00,0x7C,0x10,0x10,0x10,0x10,0x10,0x10,0x90,0xE0,0x00,///*"J",74

0x00,0x00,0xEC,0x48,0x50,0x60,0x50,0x50,0x48,0xEC,0x00,0x00,///*"K",75

0x00,0x00,0xE0,0x40,0x40,0x40,0x40,0x40,0x44,0xFC,0x00,0x00,///*"L",76

0x00,0x00,0xD8,0xD8,0xD8,0xD8,0xA8,0xA8,0xA8,0xA8,0x00,0x00,///*"M",77

0x00,0x00,0xDC,0x48,0x68,0x68,0x58,0x58,0x48,0xE8,0x00,0x00,///*"N",78

0x00,0x00,0x70,0x88,0x88,0x88,0x88,0x88,0x88,0x70,0x00,0x00,///*"O",79

0x00,0x00,0xF0,0x48,0x48,0x70,0x40,0x40,0x40,0xE0,0x00,0x00,///*"P",80

0x00,0x00,0x70,0x88,0x88,0x88,0x88,0xE8,0x98,0x70,0x18,0x00,///*"Q",81

0x00,0x00,0xF0,0x48,0x48,0x70,0x50,0x48,0x48,0xEC,0x00,0x00,///*"R",82

0x00,0x00,0x78,0x88,0x80,0x60,0x10,0x08,0x88,0xF0,0x00,0x00,///*"S",83

0x00,0x00,0xF8,0xA8,0x20,0x20,0x20,0x20,0x20,0x70,0x00,0x00,///*"T",84

0x00,0x00,0xCC,0x48,0x48,0x48,0x48,0x48,0x48,0x30,0x00,0x00,///*"U",85

0x00,0x00,0xCC,0x48,0x48,0x50,0x50,0x30,0x20,0x20,0x00,0x00,///*"V",86

0x00,0x00,0xA8,0xA8,0xA8,0x70,0x50,0x50,0x50,0x50,0x00,0x00,///*"W",87

0x00,0x00,0xD8,0x50,0x50,0x20,0x20,0x50,0x50,0xD8,0x00,0x00,///*"X",88

0x00,0x00,0xD8,0x50,0x50,0x20,0x20,0x20,0x20,0x70,0x00,0x00,///*"Y",89

0x00,0x00,0xF8,0x90,0x10,0x20,0x20,0x40,0x48,0xF8,0x00,0x00,///*"Z",90

0x00,0x38,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x38,0x00,///*"[",91

0x00,0x40,0x40,0x40,0x20,0x20,0x10,0x10,0x10,0x08,0x00,0x00,///*"\",92

0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x70,0x00,///*"]",93

0x00,0x20,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"^",94

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,///*"_",95

0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"`",96

0x00,0x00,0x00,0x00,0x00,0x30,0x48,0x38,0x48,0x3C,0x00,0x00,///*"a",97

0x00,0x00,0xC0,0x40,0x40,0x70,0x48,0x48,0x48,0x70,0x00,0x00,///*"b",98

0x00,0x00,0x00,0x00,0x00,0x38,0x48,0x40,0x40,0x38,0x00,0x00,///*"c",99

0x00,0x00,0x18,0x08,0x08,0x38,0x48,0x48,0x48,0x3C,0x00,0x00,///*"d",100

0x00,0x00,0x00,0x00,0x00,0x30,0x48,0x78,0x40,0x38,0x00,0x00,///*"e",101

0x00,0x00,0x1C,0x20,0x20,0x78,0x20,0x20,0x20,0x78,0x00,0x00,///*"f",102

0x00,0x00,0x00,0x00,0x00,0x3C,0x48,0x30,0x40,0x78,0x44,0x38,///*"g",103

0x00,0x00,0xC0,0x40,0x40,0x70,0x48,0x48,0x48,0xEC,0x00,0x00,///*"h",104

0x00,0x00,0x20,0x00,0x00,0x60,0x20,0x20,0x20,0x70,0x00,0x00,///*"i",105

0x00,0x00,0x10,0x00,0x00,0x30,0x10,0x10,0x10,0x10,0x10,0xE0,///*"j",106

0x00,0x00,0xC0,0x40,0x40,0x5C,0x50,0x70,0x48,0xEC,0x00,0x00,///*"k",107

0x00,0x00,0xE0,0x20,0x20,0x20,0x20,0x20,0x20,0xF8,0x00,0x00,///*"l",108

0x00,0x00,0x00,0x00,0x00,0xF0,0xA8,0xA8,0xA8,0xA8,0x00,0x00,///*"m",109

0x00,0x00,0x00,0x00,0x00,0xF0,0x48,0x48,0x48,0xEC,0x00,0x00,///*"n",110

0x00,0x00,0x00,0x00,0x00,0x30,0x48,0x48,0x48,0x30,0x00,0x00,///*"o",111

0x00,0x00,0x00,0x00,0x00,0xF0,0x48,0x48,0x48,0x70,0x40,0xE0,///*"p",112

0x00,0x00,0x00,0x00,0x00,0x38,0x48,0x48,0x48,0x38,0x08,0x1C,///*"q",113

0x00,0x00,0x00,0x00,0x00,0xD8,0x60,0x40,0x40,0xE0,0x00,0x00,///*"r",114

0x00,0x00,0x00,0x00,0x00,0x78,0x40,0x30,0x08,0x78,0x00,0x00,///*"s",115

0x00,0x00,0x00,0x20,0x20,0x70,0x20,0x20,0x20,0x18,0x00,0x00,///*"t",116

0x00,0x00,0x00,0x00,0x00,0xD8,0x48,0x48,0x48,0x3C,0x00,0x00,///*"u",117

0x00,0x00,0x00,0x00,0x00,0xEC,0x48,0x50,0x30,0x20,0x00,0x00,///*"v",118

0x00,0x00,0x00,0x00,0x00,0xA8,0xA8,0x70,0x50,0x50,0x00,0x00,///*"w",119

0x00,0x00,0x00,0x00,0x00,0xD8,0x50,0x20,0x50,0xD8,0x00,0x00,///*"x",120

0x00,0x00,0x00,0x00,0x00,0xEC,0x48,0x50,0x30,0x20,0x20,0xC0,///*"y",121

0x00,0x00,0x00,0x00,0x00,0x78,0x10,0x20,0x20,0x78,0x00,0x00,///*"z",122

0x00,0x18,0x10,0x10,0x10,0x20,0x10,0x10,0x10,0x10,0x18,0x00,///*"{",123

0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,///*"|",124

0x00,0x60,0x20,0x20,0x20,0x10,0x20,0x20,0x20,0x20,0x60,0x00,///*"}",125

0x40,0xA4,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,///*"~",126

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 ///*"",127

};

*/




void VGA_VRAM_LD() //¶ÁÐ´VRAMÏÔ´æÖ®Ç°Òªµ÷ÓÃ´Ëº¯Êý
{

/***************************** ÔÊÐíVRAM¸üÐÂÊ±¼ä = VGA_CL1 * (65536 / CPUÖ÷Æµ) = 21.845ºÁÃë *****************************/

#define VGA_CL1 4

/***********************************************************************************************************************/

   while((VGA_CT2_ < 256 - VGA_CL1 && (CT2 < VGA_CT2_ || CT2 >= VGA_CT2_ + VGA_CL1)   ||   VGA_CT2_ > 255 - VGA_CL1 && CT2 < VGA_CT2_ && CT2 >= VGA_CT2_ + VGA_CL1) == 0); //ÉÏ´Î¼ÇÂ¼µÄÓ²¼þ¼ÆÊýÆ÷Êý¾ÝºÍÏÖÔÚÓ²¼þ¼ÆÊýÆ÷µÄÊý¾Ý½øÐÐ±È½Ï,´ïµ½Ìõ¼þÊ±Ìø³ö
   CTVGA_C &= 0xfe; //ÇëÇó·ÃÎÊVRAM
   while((CTVGA_C & 0x80) == 0x80); //VRAM¿ÉÒÔ·ÃÎÊµÄÊ±ºòÌø³ö


}


void VGA_VRAM_UP() //Ð´ÈëÏÔ´æµÄÊý¾Ý¸üÐÂµ½ÆÁÄ»,VRAM¶ÁÐ´Íê³ÉºóÒªµ÷ÓÃ´Ëº¯Êý
{
   CTVGA_C |= 0x01; //ÇëÇóVRAMÏÔÊ¾
   VGA_CT2_ = CT2;  //¼ÇÂ¼µ±Ç°Ó²¼þ¼ÆÊýÆ÷Êý¾Ý
}



void VGA_SK0(unsigned char Y,unsigned char _Y,unsigned char DATA) //»­É«¿é0,YÎªÆðÊ¼×ø±ê,_YÎª½áÊø×ø±ê,X×ø±ê256È«²¿Ð´ÏñËØ,12MHZµÄCPUÆµÂÊÏÂÃ¿Ãë¿ÉÒÔÖ´ÐÐÔ¼40´Î
{

 while(Y != _Y)
 {

   _B = DATA;
   _A = 0;

   do
   {
     _A1 = Y;
     _A2 = 0x80;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

     _A0 = _A;
     _NOP;
     _RAM = _B;
     _A = _A + 1;

   }while(_SUB_A_1 != -1);

   ++Y;

 }


}



void VGA_SK1(unsigned char y,unsigned char x,unsigned char _y,unsigned char _x,unsigned char data) //»­É«¿é1,yxÎªÆðÊ¼×ø±ê,_y_xÎªµãÊý,dataÏñËØÊý¾Ý
{

unsigned char x_;


  if(_y != 0 && _x != 0)
  {

    x_ = x;
    _y += y;
    _x += x;

    do
    {
       do
       {
          _B = data;
          _A = y;
          _A0 = x;
          _A2 = 0x80;
          _A1 = _A;
          _NOP;
          _RAM = _B;
          ++x;

       }while(x != _x);

       x = x_;
       ++y;

    }while(y != _y);

  }

}


void VGA_ZX(unsigned char y,unsigned char x,unsigned char _y,unsigned char _x,unsigned char data) //»­Ö±Ïß,yxÎªÆðÊ¼×ø±ê,_y_xÎª½áÊø×ø±ê,dataÏñËØÊý¾Ý
{

unsigned int _y_; //Y×ø±ê²îÖµ
unsigned int _x_;  //X×ø±ê²îÖµ
unsigned char _y1; //_y×ø±ê+-1
unsigned char _x1; //_x×ø±ê+1

unsigned char js0;
unsigned int js1;
unsigned int js2;
unsigned char js3;
unsigned char js4;


    if(_x < x) //X×ø±ê·´·½Ïò
    {
        js0 = x;
        x = _x;
        _x = js0;

        js0 = y;
        y = _y;
        _y = js0;
    }


    if(_y < y) //Y×ø±ê·´·½Ïò
    {
       _y1 = _y - 1;
       _y_ = y - _y;
       ++_y_;
       js0 = -1;
    }
    else //Y×ø±êÕý·½Ïò
    {
       _y1 = _y + 1;
       _y_ = _y - y;
       ++_y_;
       js0 = 1;
    }

    _x1 = _x + 1;
    _x_ = _x - x;
    ++_x_;


    if(_y_ == _x_) //Õý·½ÐÎ¶Ô½Ç
    {

        do
        {
            _B = data;
            _A = y;
            _A0 = x;
            _A2 = 0x80;
            _A1 = _A;
            _NOP;
            _RAM = _B;
            y += js0;
            ++x;

        }while(y != _y1);

    }
    else if(_y_ > _x_) //ÊúµÄ³¤·½ÐÎ¶Ô½Ç
    {

        js1 = _x_;
        js1 <<= 8;
        js1 = js1 / _y_; //¼ÆËã³ö±ÈÀýÔöÖµ
        js2 = x;
        js2 <<= 8;

        do
        {

            js2 += js1;
            x = js2 >> 8;
            if(x == _x1) x = _x; //ÏÞÖÆ

            _B = data;
            _A = y;
            _A0 = x;
            _A2 = 0x80;
            _A1 = _A;
            _NOP;
            _RAM = _B;
            y += js0;


        }while(y != _y1);

    }
    else //ºáµÄ³¤·½ÐÎ¶Ô½Ç
    {

        js1 = _y_;
        js1 <<= 8;
        js1 = js1 / _x_; //¼ÆËã³ö±ÈÀýÔöÖµ
        js2 = 0;
        js3 = y;


        do
        {

            js2 += js1;
            js4 = js2 >> 8;

            if(js3 > _y)
            {
                y = js3 - js4;
            }
            else
            {
                y = js3 + js4;
            }

            if(y == _y1) y = _y; //ÏÞÖÆ


            _B = data;
            _A = y;
            _A0 = x;
            _A2 = 0x80;
            _A1 = _A;
            _NOP;
            _RAM = _B;
            ++x;

        }while(x != _x1);



    }


}


void VGA_kuang0(unsigned char y,unsigned char x,unsigned char _y,unsigned char _x,unsigned char data) //»­¿ò0,yxÎªÆðÊ¼×ø±ê,_y_xÎªµãÊý+1,dataÏñËØÊý¾Ý
{

unsigned char x_;
unsigned char y_;


  if(_y != 0 && _x != 0)
  {

    x_ = x;
    y_ = y;
    _y += y;
    _x += x;


       do
       {
          _B = data;
          _A = y;
          _A0 = x;
          _A2 = 0x80;
          _A1 = _A;
          _NOP;
          _RAM = _B;
          ++x;

       }while(x != _x);

       do
       {
          _B = data;
          _A = y;
          _A0 = x;
          _A2 = 0x80;
          _A1 = _A;
          _NOP;
          _RAM = _B;
          ++y;

       }while(y != _y);

       do
       {
          _B = data;
          _A = y;
          _A0 = x;
          _A2 = 0x80;
          _A1 = _A;
          _NOP;
          _RAM = _B;
          --x;

       }while(x != x_);

       do
       {
          _B = data;
          _A = y;
          _A0 = x;
          _A2 = 0x80;
          _A1 = _A;
          _NOP;
          _RAM = _B;
          --y;

       }while(y != y_);


  }

}


void VGA_ASCII(unsigned char y,unsigned char x,unsigned int ascii_data,unsigned char rgb_data) //ÏÔÊ¾Ä¬ÈÏ´óÐ¡ASCIIÂë,yxÎªÆðÊ¼×ø±ê,ascii_dataÎªASCIIÖµ,rgb_dataÏñËØÊý¾Ý
{

unsigned char x_;
unsigned char b_x;
unsigned char bit_data;
unsigned char *_addr;


     x_ = x;
     _addr = ASCII + ascii_data * 12;

     b_x = 0;

     do
     {

          bit_data = *_addr;


          if((bit_data & 0x80) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
          if((bit_data & 0x40) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
          if((bit_data & 0x20) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
          if((bit_data & 0x10) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
          if((bit_data & 0x08) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
          if((bit_data & 0x04) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B;


          ++_addr;
          ++b_x;
          x = x_;
          ++y;

     }while(b_x != 12);


}

void VGA_GB2312(unsigned char y,unsigned char x,unsigned char *GB2312_data,unsigned char rgb_data) //ÏÔÊ¾Ä¬ÈÏ´óÐ¡GB2312Âë,yxÎªÆðÊ¼×ø±ê,GB2312_dataÎªGB2312×Ö·û´®,rgb_dataÏñËØÊý¾Ý
{

unsigned char x_;
unsigned char b_x;
unsigned char D1;
unsigned char D2;
unsigned long int ZADDR;
unsigned char *_addr;

unsigned int DH;
unsigned int DL;

  DH = GB2312_data[0];
  DL = GB2312_data[1];

  x_ = x;
  ZADDR = (DH - 0xa1) * 94 + (DL - 0xa1); //Ëã³öGB2312×Ö·ûµØÖ·
  ZADDR *= 24; //Ò»¸ö×Ö·ûÕ¼×Ö¿â24¸ö×Ö½Ú ³Ë24Ëã³öGB2312×Ö¿âµØÖ·

  _addr = GB2312 + ZADDR;


  b_x = 0;

  do
  {

     D1 = *_addr;  //¶Á³ö¸ß8Î»ÏñËØ×Ö½Ú
     ++_addr;
     D2 = *_addr;  //¶Á³öµÍ8Î»ÏñËØ×Ö½Ú
     ++_addr;

     if((D1 & 0x80) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x40) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x20) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x10) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x08) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x04) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x02) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D1 & 0x01) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;

     if((D2 & 0x80) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D2 & 0x40) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D2 & 0x20) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B; ++x;
     if((D2 & 0x10) != 0) _B = rgb_data,_A = y,_A0 = x,_A2 = 0x80,_A1 = _A,_NOP,_RAM = _B;


     x = x_; //x×ø±ê»Ö¸´Æðµã
     ++y; //yµØÖ·¼Ó1
     ++b_x;

  }while(b_x != 12);


}




void VGA_U32_Dprint(unsigned char y,unsigned char x,unsigned long int XX,unsigned char rgb_data) //32Î»ÎÞ·ûºÅÊý×ªÊ®½øÖÆÏÔÊ¾,yxÎªÆðÊ¼×ø±ê,XXÎª32Î»Êý,rgb_dataÏñËØÊý¾Ý
{

unsigned char i;
unsigned char k = 0;


  i = XX / 1000000000;
  if(i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"Ê®ÒÚÎ»"

  XX %= 1000000000;
  i = XX / 100000000;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"ÒÚÎ»"

  XX %= 100000000;
  i = XX / 10000000;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"Ç§ÍòÎ»"

  XX %= 10000000;
  i = XX / 1000000;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"°ÙÍòÎ»"

  XX %= 1000000;
  i = XX / 100000;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"Ê®ÍòÎ»"

  XX %= 100000;
  i = XX / 10000;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"ÍòÎ»"

  XX %= 10000;
  i = XX / 1000;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"Ç§Î»"

  XX %= 1000;
  i = XX / 100;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6,k = 1;  //"°ÙÎ»"

  XX %= 100;
  i = XX / 10;
  if(k != 0 || i != 0) VGA_ASCII(y,x,'0'+i,rgb_data),x+=6;  //"Ê®Î»"


  VGA_ASCII(y,x,'0' + XX % 10,rgb_data);  //"¸öÎ»"


}



void VGA_CS_RGB256() //²âÊÔÏÔÊ¾256ÖÖÑÕÉ«
{

unsigned char x;
unsigned char y;
unsigned char data;

   data = 0;
   y = 12;

   do
   {
      x = 12;
      do
      {
         VGA_SK1(y,x,12,12,data);
         x += 14;
         ++data;

      }while(x != 236);

      y += 14;

   }while(y != 236);


}










